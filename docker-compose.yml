version: '3.8'

services:
  marxnager-bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: marxnager-bot
    restart: unless-stopped
    environment:
      # Telegram Bot Configuration
      - BOT_TOKEN=${BOT_TOKEN}
      - AUTHORIZED_USER_IDS=${AUTHORIZED_USER_IDS}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}

      # OpenRouter Configuration
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - MODEL_PRIMARY=${MODEL_PRIMARY}
      - MODEL_FALLBACK=${MODEL_FALLBACK}
      - PRIMARY_DRAFT_MODEL=${PRIMARY_DRAFT_MODEL}
      - FALLBACK_DRAFT_MODEL=${FALLBACK_DRAFT_MODEL}
      - REPAIR_MODEL=${REPAIR_MODEL}

      # Notion Configuration
      - NOTION_TOKEN=${NOTION_TOKEN}
      - NOTION_DATABASE_ID=${NOTION_DATABASE_ID}

      # Perplexity Configuration
      - PERPLEXITY_API_KEY_PRIMARY=${PERPLEXITY_API_KEY_PRIMARY}
      - PERPLEXITY_API_KEY_FALLBACK=${PERPLEXITY_API_KEY_FALLBACK}

      # Google Drive & Docs Configuration
      - GOOGLE_DRIVE_CREDENTIALS_PATH=${GOOGLE_DRIVE_CREDENTIALS_PATH}
      - GOOGLE_DRIVE_ROOT_FOLDER_ID=${GOOGLE_DRIVE_ROOT_FOLDER_ID}
      - ADMIN_EMAIL=${ADMIN_EMAIL}
      - DRIVE_FOLDER_DENUNCIAS=${DRIVE_FOLDER_DENUNCIAS}
      - DRIVE_FOLDER_DEMANDAS=${DRIVE_FOLDER_DEMANDAS}
      - DRIVE_FOLDER_EMAILS=${DRIVE_FOLDER_EMAILS}
    volumes:
      - ./logs:/app/logs
    # No ports exposed as it's a Telegram bot using polling
